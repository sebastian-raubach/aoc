import{c as C,V as R}from"./color-Cgs3GWPp.js";import{a4 as v,v as D,o as S,c as N,a as W,r as F,w as P,ab as _,a6 as G,ah as j,a0 as q}from"./index-B18PseM7.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={id:"holderOne",class:"canvas-holder"},H=v({__name:"V20",props:{width:{},height:{},path:{},walls:{},sOne:{}},setup(g){const l=g,d=()=>{var r;const a=Math.max(1,Math.floor((((r=document.getElementById("holderOne"))==null?void 0:r.offsetWidth)||1)/l.width)),h=document.getElementById("partOne"),n=h.getContext("2d");h.width=l.width*a+1,h.height=l.height*a+1,n.translate(.5,.5),n.lineWidth=1,n.fillStyle="#222222",n.strokeStyle="white",n.fillRect(0,0,h.width,h.height),n.fillStyle="#2f3542",l.walls.forEach(i=>{const[p,x]=i.split("|").map(Number);n.fillRect(p*a,x*a,a,a)});const y=C(R,l.path.length+1);l.path.forEach((i,p)=>{n.fillStyle=y[p],n.fillRect(i.x*a,i.y*a,a,a)}),l.sOne.forEach(i=>{n.beginPath(),n.moveTo((i.path[0].x+.5)*a,(i.path[0].y+.5)*a),n.lineTo((i.path[1].x+.5)*a,(i.path[1].y+.5)*a),n.stroke()})};return D(()=>d()),(a,h)=>(S(),N("div",A,h[0]||(h[0]=[W("canvas",{id:"partOne",class:"canvas",height:"500",width:"500"},null,-1)])))}}),J=z(H,[["__scopeId","data-v-b7f4196f"]]),X=v({__name:"D20",props:{input:{}},emits:["onFinished"],setup(g,{emit:l}){const d=g,a=l,h=F(!1);let n=0,y=0;const r=[],i=[];let p=0;const x={x:0,y:0},w={x:0,y:0},m=new Set,M=[[-1,0],[1,0],[0,1],[0,-1]],k=[[-2,0],[2,0],[0,2],[0,-2]],T=()=>{const f=new Set;let s=x;for(;s.x!==w.x||s.y!==w.y;){r.push(s),f.add(`${s.x}|${s.y}`);const e=M.map(t=>({x:s.x+t[0],y:s.y+t[1]})).find(t=>t.x>=0&&t.x<n&&t.y>=0&&t.y<y&&!m.has(`${t.x}|${t.y}`)&&!f.has(`${t.x}|${t.y}`));e&&(s=e)}return r.push(w),r},b=f=>{const s=r.map(e=>`${e.x}|${e.y}`);r.forEach((e,t)=>{k.forEach(o=>{const c=`${e.x+o[0]}|${e.y+o[1]}`,u=`${e.x+o[0]/2}|${e.y+o[1]/2}`,$=s.indexOf(c);$>t&&$-t-2>=f&&m.has(u)&&i.push({path:[e,{x:e.x+o[0],y:e.y+o[1]}]})})})},B=(f,s)=>{const e=new Map;r.forEach((t,o)=>e.set(`${t.x}|${t.y}`,o)),r.forEach((t,o)=>{for(let c=-s;c<=s;c++)for(let u=-s+Math.abs(c);u<=s-Math.abs(c);u++){const $=`${t.x+u}|${t.y+c}`,E=e.get($)||-1,O=Math.abs(u)+Math.abs(c),V=E-o-O;O<=s&&E>o&&V>=f&&p++}})},I=()=>{if(d.input){y=d.input.length,d.input.forEach((e,t)=>{n===0&&(n=e.length),e.split("").forEach((o,c)=>{o==="#"?m.add(`${c}|${t}`):o==="S"?(x.x=c,x.y=t):o==="E"&&(w.x=c,w.y=t)})}),T(),b(100),B(100,20);const f=i.length;a("onFinished",f,p),q(()=>{h.value=!0})}};return P(()=>d.input,()=>I(),{immediate:!0}),(f,s)=>_(h)?(S(),G(J,{key:0,height:_(y),path:r,"s-one":i,walls:_(m),width:_(n)},null,8,["height","walls","width"])):j("",!0)}});export{X as default};
