import{c as R,V as N}from"./color-Cgs3GWPp.js";import{a4 as v,v as W,o as k,c as D,a as F,r as P,w as G,ab as _,a6 as j,ah as q,a0 as z}from"./index-gR1E7YKU.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={id:"holderOne",class:"canvas-holder"},J=v({__name:"V20",props:{width:{},height:{},path:{},walls:{},sOne:{}},setup(g){const r=g,u=()=>{var h;const a=Math.max(1,Math.floor((((h=document.getElementById("holderOne"))==null?void 0:h.offsetWidth)||1)/r.width)),c=document.getElementById("partOne"),n=c.getContext("2d");c.width=r.width*a+1,c.height=r.height*a+1,n.translate(.5,.5),n.lineWidth=1,n.fillStyle="#222222",n.strokeStyle="white",n.fillRect(0,0,c.width,c.height),n.fillStyle="#2f3542",r.walls.forEach(i=>{const[x,m]=i.split("|").map(Number);n.fillRect(x*a,m*a,a,a)});const y=R(N,r.path.length+1);r.path.forEach((i,x)=>{n.fillStyle=y[x],n.fillRect(i.x*a,i.y*a,a,a)}),r.sOne.forEach(i=>{n.beginPath(),n.moveTo((i.path[0].x+.5)*a,(i.path[0].y+.5)*a),n.lineTo((i.path[1].x+.5)*a,(i.path[1].y+.5)*a),n.stroke()})};return W(()=>u()),(a,c)=>(k(),D("div",H,c[0]||(c[0]=[F("canvas",{id:"partOne",class:"canvas",height:"500",width:"500"},null,-1)])))}}),K=A(J,[["__scopeId","data-v-b7f4196f"]]),Y=v({__name:"D20",props:{input:{}},emits:["onFinished"],setup(g,{emit:r}){const u=g,a=r,c=P(!1);let n=0,y=0;const h=[],i=[];let x=0;const m={x:0,y:0},w={x:0,y:0},$=new Set,M=[[-1,0],[1,0],[0,1],[0,-1]],T=[[-2,0],[2,0],[0,2],[0,-2]],b=()=>{const l=new Set;let s=m;for(;s.x!==w.x||s.y!==w.y;){h.push(s),l.add(`${s.x}|${s.y}`);const e=M.map(t=>({x:s.x+t[0],y:s.y+t[1]})).find(t=>t.x>=0&&t.x<n&&t.y>=0&&t.y<y&&!$.has(`${t.x}|${t.y}`)&&!l.has(`${t.x}|${t.y}`));e&&(s=e)}return h.push(w),h},B=l=>{const s=h.map(e=>`${e.x}|${e.y}`);h.forEach((e,t)=>{T.forEach(o=>{const f=`${e.x+o[0]}|${e.y+o[1]}`,d=`${e.x+o[0]/2}|${e.y+o[1]/2}`,p=s.indexOf(f);p>t&&p-t-2>=l&&$.has(d)&&i.push({path:[e,{x:e.x+o[0],y:e.y+o[1]}]})})})},I=(l,s)=>{const e=h.map(o=>`${o.x}|${o.y}`),t=new Set(e);h.forEach((o,f)=>{for(let d=-s;d<=s;d++)for(let p=-s+Math.abs(d);p<=s-Math.abs(d);p++){const S=`${o.x+p}|${o.y+d}`;if(t.has(S)){const O=e.indexOf(S),E=Math.abs(p)+Math.abs(d),C=O-f-E;E<=s&&O>f&&C>=l&&x++}}})},V=()=>{if(u.input){y=u.input.length,u.input.forEach((e,t)=>{n===0&&(n=e.length),e.split("").forEach((o,f)=>{o==="#"?$.add(`${f}|${t}`):o==="S"?(m.x=f,m.y=t):o==="E"&&(w.x=f,w.y=t)})}),b(),B(100),I(100,20);const l=i.length;a("onFinished",l,x),z(()=>{c.value=!0})}};return G(()=>u.input,()=>V(),{immediate:!0}),(l,s)=>_(c)?(k(),j(K,{key:0,height:_(y),path:h,"s-one":i,walls:_($),width:_(n)},null,8,["height","walls","width"])):q("",!0)}});export{Y as default};
