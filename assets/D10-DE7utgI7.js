import{c as F,V as $}from"./color-Cgs3GWPp.js";import{a4 as v,v as C,o as S,c as M,a as E,r as V,w as B,ab as I,a6 as T,ah as q}from"./index-gR1E7YKU.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"canvas-holder"},J=v({__name:"V10",props:{grid:{},start:{},path:{},enclosed:{}},setup(m){const l=m,a={gradient:[],pathIndex:0,enclosedIndex:0,factor:7};let h,s;const i=()=>{a.gradient=F($,Math.ceil(l.path.length/2)),h=document.getElementById("partOne"),s=h.getContext("2d"),h.width=l.grid[0].length*a.factor,h.height=l.grid.length*a.factor,s.fillStyle="#222222",s.fillRect(0,0,h.width,h.height),s.lineWidth=a.factor/4;for(let o=0;o<l.grid.length;o++)for(let n=0;n<l.grid[o].length;n++){let d=l.grid[o][n];o===l.start.y&&n===l.start.x&&(d="S"),s.strokeStyle="#34495e",s.fillStyle="#34495e",g(n,o,d)}window.requestAnimationFrame(()=>P())},P=()=>{const o=a.pathIndex,n=l.path[o],d=l.grid[n.y][n.x],e=l.path[l.path.length-o-1],t=l.grid[e.y][e.x];if((n.x===e.x&&n.y)===e.y||o===Math.floor(l.path.length/2))s.fillStyle="#e74c3c",s.strokeStyle="#e74c3c";else{const c=a.gradient[o];s.strokeStyle=c,s.fillStyle=c}if(g(n.x,n.y,d),g(e.x,e.y,t),o<l.path.length/2)a.pathIndex++,window.requestAnimationFrame(()=>P());else{const c=l.enclosed.concat().sort((r,x)=>Math.sign(r.x+r.y-(x.x+x.y)));window.requestAnimationFrame(()=>k(c))}},k=o=>{s.strokeStyle="#25CCF7",s.fillStyle="#25CCF7";const n=o[a.enclosedIndex];g(n.x,n.y,l.grid[n.y][n.x]),a.enclosedIndex<o.length-1&&(a.enclosedIndex++,window.requestAnimationFrame(()=>k(o)))},g=(o,n,d)=>{switch(d){case"F":s.beginPath(),s.arc((o+1)*a.factor,(n+1)*a.factor,a.factor/2,Math.PI,1.5*Math.PI),s.stroke();break;case"J":s.beginPath(),s.arc(o*a.factor,n*a.factor,a.factor/2,0,.5*Math.PI),s.stroke();break;case"7":s.beginPath(),s.arc(o*a.factor,(n+1)*a.factor,a.factor/2,1.5*Math.PI,0),s.stroke();break;case"L":s.beginPath(),s.arc((o+1)*a.factor,n*a.factor,a.factor/2,.5*Math.PI,Math.PI),s.stroke();break;case"|":s.beginPath(),s.moveTo(o*a.factor+a.factor/2,n*a.factor),s.lineTo(o*a.factor+a.factor/2,(n+1)*a.factor),s.stroke();break;case"-":s.beginPath(),s.moveTo(o*a.factor,n*a.factor+a.factor/2),s.lineTo((o+1)*a.factor,n*a.factor+a.factor/2),s.stroke();break;case".":s.beginPath(),s.arc(o*a.factor+a.factor/2,n*a.factor+a.factor/2,a.factor/4,0,2*Math.PI),s.fill();break;case"S":s.fillStyle="#e74c3c",s.fillRect(o*a.factor,n*a.factor,a.factor,a.factor);break}};return C(()=>i()),(o,n)=>(S(),M("div",O,n[0]||(n[0]=[E("canvas",{id:"partOne",class:"canvas",height:"1000",width:"1000"},null,-1)])))}}),L=A(J,[["__scopeId","data-v-dab4007b"]]),G=v({__name:"D10",props:{input:{}},emits:["onFinished"],setup(m,{emit:l}){const a=m,h=l,s=V({finished:!1,grid:[[]],enclosed:[],path:[],start:{x:0,y:0}});let i;const P=[[-1,0],[1,0],[0,-1],[0,1]],k={L:(e,t)=>e.x===t.x&&e.y===t.y-1||e.y===t.y&&e.x===t.x+1,J:(e,t)=>e.x===t.x&&e.y===t.y-1||e.y===t.y&&e.x===t.x-1,7:(e,t)=>e.x===t.x&&e.y===t.y+1||e.y===t.y&&e.x===t.x-1,F:(e,t)=>e.x===t.x&&e.y===t.y+1||e.y===t.y&&e.x===t.x+1,"|":(e,t)=>e.x===t.x&&e.y===t.y-1||e.x===t.x&&e.y===t.y+1,"-":(e,t)=>e.y===t.y&&e.x===t.x-1||e.y===t.y&&e.x===t.x+1,S:(e,t)=>!0},g=e=>P.map(t=>({x:e.x+t[0],y:e.y+t[1]})).filter(t=>t.x>=0&&t.x<i[0].length&&t.y>=0&&t.y<i.length),o=e=>{const t=e[0],c=e[1],r=e[e.length-1];r.x===t.x&&t.x===c.x?i[t.y][t.x]="|":r.y===t.y&&t.y===c.y?i[t.y][t.x]="-":r.x===t.x+1&&c.y===t.y+1||c.x===t.x+1&&r.y===t.y+1?i[t.y][t.x]="F":r.x===t.x-1&&c.y===t.y+1||c.x===t.x-1&&r.y===t.y+1?i[t.y][t.x]="7":r.x===t.x+1&&c.y===t.y-1||c.x===t.x+1&&r.y===t.y-1?i[t.y][t.x]="L":(r.x===t.x-1&&c.y===t.y-1||c.x===t.x-1&&r.y===t.y-1)&&(i[t.y][t.x]="J")},n=e=>{const t=new Map;e.forEach((r,x)=>{t.set(`${r.x}|${r.y}`,x)});const c=[];for(let r=0;r<i.length;r++)for(let x=0;x<i[r].length;x++)if(!t.has(`${x}|${r}`)){let u=!1,p=x;for(;p>=0;){const f=t.get(`${p}|${r}`),w=i[r][p];f!==void 0&&(w==="|"||w==="F"||w==="7")&&(u=!u),p--}u&&c.push({x,y:r})}return c},d=()=>{if(a.input){i=a.input.map(f=>f.split(""));let e={x:0,y:0};a.input.forEach((f,w)=>{const b=f.indexOf("S");b!==-1&&(e={x:b,y:w})});const t=[],c=new Set;let r=e;for(;;){t.push(r),c.add(`${r.x},${r.y}`);const f=i[r.y][r.x],b=g(r).filter(y=>{const _=i[y.y][y.x];return c.has(`${y.x},${y.y}`)?!1:y.x===e.x&&y.y===e.y?!0:_==="."?!1:k[_](r,y)&&k[f](y,r)});if(b.length>0)r=b[0];else break}o(t);const x=Math.floor(t.length/2),u=n(t),p=u.length;h("onFinished",x,p),s.value={finished:!0,grid:i,enclosed:u,path:t,start:e}}};return B(()=>a.input,()=>d(),{immediate:!0}),(e,t)=>(S(),M("div",null,[I(s).finished?(S(),T(L,{key:0,enclosed:I(s).enclosed,grid:I(s).grid,path:I(s).path,start:I(s).start},null,8,["enclosed","grid","path","start"])):q("",!0)]))}});export{G as default};
