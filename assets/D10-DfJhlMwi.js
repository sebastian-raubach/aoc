import{p as v}from"./index-CrTQY8dy.js";import{c as E,V as N}from"./color-Cgs3GWPp.js";import{a4 as _,v as J,o as w,c as O,a as V,r as S,w as b,ab as g,a6 as H,ah as M}from"./index-BgPGxWCm.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"canvas-holder"},k=_({__name:"V10",props:{machines:{},solutions:{}},setup(I){const u=I;let c,i;const a={fgGradient:[],factor:10},f=()=>{let h=0;const l=u.machines.map((t,o)=>{const e=JSON.parse(JSON.stringify(t));e.indicatorHeat=e.indicators.map(()=>0),e.indicatorSteps=[];let r=e.indicators.map(()=>!1);return e.indicatorSteps.push(r),u.solutions[o].pressedButtons.forEach(d=>{r=r.concat(),t.buttons[d].forEach(p=>{r[p]=!r[p],e.indicatorHeat[p]++}),h=Math.max(h,Math.max(...e.indicatorHeat)),e.indicatorSteps.push(r)}),e}),n=u.machines.map(t=>t.indicators.length).reduce((t,o)=>t+o)+u.machines.length-1,m=Math.max(...l.map(t=>t.indicatorSteps.length));a.fgGradient=E(N,h+1),c=document.getElementById("partOne"),c.width=n*a.factor,c.height=m*a.factor,i=c.getContext("2d"),i.lineWidth=1,i.fillStyle="#222222",i.fillRect(0,0,c.width,c.height);let s=0;l.forEach((t,o)=>{s+=o===0?0:(u.machines[o-1].indicators.length+1)*a.factor,t.indicatorHeat.forEach((e,r)=>{const p=s+r*a.factor;i.fillStyle=a.fgGradient[e],i.fillRect(p,0,a.factor,a.factor)})}),s=0,u.machines.forEach((t,o)=>{s+=o===0?0:(u.machines[o-1].indicators.length+1)*a.factor,l[o].indicatorSteps.forEach((r,d)=>{const p=(d+1)*a.factor;r.forEach((x,y)=>{const B=s+y*a.factor;i.fillStyle=x===!0?"#bdc3c7":"#34495e",i.fillRect(B,p,a.factor,a.factor)})})})};return J(()=>f()),(h,l)=>(w(),O("div",j,l[0]||(l[0]=[V("canvas",{id:"partOne",class:"canvas",height:"1000",width:"1000"},null,-1)])))}}),q=P(k,[["__scopeId","data-v-379f68d1"]]),T=_({__name:"D10",props:{input:{}},emits:["onFinished"],setup(I,{emit:u}){const c=I,i=u,a=S(),f=S(),h=()=>{if(c.input){let n=0,m=0;a.value=c.input.map(s=>{const t={indicators:[],buttons:[],joltage:[]};return s.split(" ").forEach(e=>{e.startsWith("[")?t.indicators=e.replace(/(\[|\])/g,"").split("").map(r=>r==="#"):e.startsWith("{")?t.joltage=e.replace(/(\{|\})/g,"").split(",").map(Number):t.buttons.push(e.replace(/(\(|\))/g,"").split(",").map(Number))}),t}),f.value=a.value.map(s=>l(s)),n=f.value.map(s=>s.cost).reduce((s,t)=>s+t),i("onFinished",n,m)}};function l(n){const m=(t,o)=>t.cost-o.cost,s=new v.PriorityQueue(m);for(s.enqueue({targetIndicators:n.indicators,currentIndicators:n.indicators.map(()=>!1),targetJoltage:n.joltage,currentJoltage:n.joltage.map(()=>0),cost:0,pressedButtons:[]});s.size()>0;){const t=s.dequeue();if(t){if(JSON.stringify(t.currentIndicators)===JSON.stringify(t.targetIndicators))return{cost:t.cost,pressedButtons:t.pressedButtons};for(let o=0;o<n.buttons.length;o++){const e=t.currentIndicators.concat(),r=[];n.buttons[o].forEach(d=>{e[d]=!e[d]}),r.push(o),s.enqueue({targetIndicators:t.targetIndicators,currentIndicators:e,currentJoltage:t.currentJoltage,targetJoltage:t.targetJoltage,cost:t.cost+1,pressedButtons:t.pressedButtons.concat(r)})}}}return{cost:Number.POSITIVE_INFINITY,pressedButtons:[]}}return b(()=>c.input,()=>h(),{immediate:!0}),(n,m)=>g(a)&&g(f)?(w(),H(q,{key:0,machines:g(a),solutions:g(f)},null,8,["machines","solutions"])):M("",!0)}});export{T as default};
