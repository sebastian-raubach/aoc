import{a4 as v,w as f,o as w,c as _}from"./index-AEpBT1OT.js";const k=v({__name:"D4",props:{input:{}},emits:["onFinished"],setup(p,{emit:u}){const i=p,l=u,m=()=>{if(i.input){const c=/Card\s+(?<card>\d+): (?<winning>.+) \| (?<having>.+)/,e=i.input.map(n=>{var s;const t=(s=n.match(c))==null?void 0:s.groups;if(t){const o=t.winning.trim().split(/\s+/).map(Number),r=t.having.trim().split(/\s+/).map(Number).filter(g=>o.includes(g)).length;return{overlap:r,value:r>0?Math.pow(2,r-1):0}}else return{overlap:0,value:0}}),h=e.map(n=>n.value).reduce((n,t)=>n+t,0),a={};e.forEach((n,t)=>{a[t]=1});for(let n=0;n<e.length;n++){const t=a[n];if(e[n].overlap>0){const s=Math.min(e.length,n+1+e[n].overlap);for(let o=n+1;o<s;o++)a[o]+=t}}const d=Object.values(a).reduce((n,t)=>n+t,0);l("onFinished",h,d)}};return f(()=>i.input,()=>m(),{immediate:!0}),(c,e)=>(w(),_("span"))}});export{k as default};
