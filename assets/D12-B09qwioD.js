import{a4 as _,w as L,o as w,c as x}from"./index-D6yzMWWV.js";const s=_({__name:"D12",props:{input:{}},emits:["onFinished"],setup(c,{emit:g}){const h=c,b=g,a=(n,t,l,e,u)=>{function f(r){return u[t]||(u[t]=[]),u[t][l.length]=r,r}if(u[t]&&typeof u[t][l.length]=="number")return u[t][l.length];if(l.length===0)return n.indexOf("#",t)>=0?0:1;if(t+e>n.length)return f(0);if(n[t]==="."){let r=t;for(;n[r]===".";)r++;return f(a(n,r,l,e,u))}else{if(t>=n.length)return f(l.length===0?1:0);if(n[t]==="#"){if(n.length-t<l[0])return f(0);for(let r=0;r<l[0];r++)if(n[t+r]===".")return f(0);return n[t+l[0]]==="#"?f(0):f(a(n,t+l[0]+1,l.slice(1),e-l[0]-1,u))}else if(n[t]==="?"){let r=a(n,t+1,l,e,u);if(n.length-t<l[0])return f(r);for(let i=0;i<l[0];i++)if(n[t+i]===".")return f(r);return n[t+l[0]]==="#"||(r+=a(n,t+l[0]+1,l.slice(1),e-l[0]-1,u)),f(r)}}return 0},C=()=>{if(h.input){const n=h.input.map(e=>{const[u,f]=e.split(" ").map((r,i)=>i===0?r:r.split(",").map(Number));return{conditions:u,runLengths:f,possibleCount:0}}),t=n.map(e=>{const u=e.runLengths.reduce((f,r)=>f+r+1);return e.possibleCount=a(e.conditions,0,e.runLengths,u,[]),e.possibleCount}).reduce((e,u)=>e+u),l=n.map(e=>{e.conditions=[0,1,2,3,4].map(()=>e.conditions).join("?"),e.runLengths=[0,1,2,3,4].map(()=>e.runLengths).flat();const u=e.runLengths.reduce((f,r)=>f+r+1);return e.possibleCount=a(e.conditions,0,e.runLengths,u,[]),e.possibleCount}).reduce((e,u)=>e+u);b("onFinished",t,l)}};return L(()=>h.input,()=>C(),{immediate:!0}),(n,t)=>(w(),x("span"))}});export{s as default};
