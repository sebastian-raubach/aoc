import{c as C,V as I}from"./color-Cgs3GWPp.js";import{m as k}from"./math-BfW4n0ha.js";import{a4 as E,r as B,w as A,ab as F,o as M,c as S,a as V,ah as D,a0 as z}from"./index-tHse_ObI.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={key:0,class:"canvas-holder"},W=E({__name:"D15",props:{input:{}},emits:["onFinished"],setup(_,{emit:v}){const h=_,w=v,x=B(!1),y=l=>{const c=Math.max(...l.map(r=>r.length)),i=Math.max(...l.map(r=>Math.max(...r.map(f=>f.lens)))),s=C(I,i+1),t=document.getElementById("partTwo"),e=20,a=30,o=2;t.width=(c+o)*a+30,t.height=(l.length+o)*e;const n=t.getContext("2d");n.font="10px sans-serif",n.textAlign="end",n.textBaseline="middle",n.fillStyle="#222222",n.fillRect(0,0,t.width,t.height),l.forEach((r,f)=>{n.fillStyle="#ffffff",n.fillText(`${f+1}`,30,f*e+e/2),r.forEach((g,b)=>{const m=.7+g.lens*.7/i*a/2,d=30+o+b*a+a/2,p=f*e+o/2;n.fillStyle=s[g.lens],n.beginPath(),n.moveTo(d,p),console.log(m,m),n.bezierCurveTo(d+m,p+e*.25,d+m,p+e*.75,d,p+e-o-o/2),n.bezierCurveTo(d-m,p+e*.75,d-m,p+e*.25,d,p),n.fill()})})},u=l=>{const c=l.split("");let i=0;return c.forEach(s=>{i+=s.charCodeAt(0),i*=17,i=k(i,256)}),i},T=()=>{if(h.input){const l=h.input[0].split(",").map(s=>u(s)).reduce((s,t)=>s+t,0),c=Array.from(Array(256).keys()).map(()=>[]);h.input[0].split(",").forEach(s=>{if(s.endsWith("-")){const t=s.substring(0,s.length-1),e=u(t),a=c[e],o=a.findIndex(n=>n.label===t);o!==-1&&a.splice(o,1)}else{const[t,e]=s.split("="),a=u(t),o=c[a],n=o.findIndex(r=>r.label===t);n!==-1?o[n].lens=+e:o.push({label:t,lens:+e})}});const i=c.map((s,t)=>s.map((e,a)=>(t+1)*(a+1)*e.lens).reduce((e,a)=>e+a,0)).reduce((s,t)=>s+t,0);w("onFinished",l,i),x.value=!0,z(()=>y(c))}};return A(()=>h.input,()=>T(),{immediate:!0}),(l,c)=>F(x)?(M(),S("div",R,c[0]||(c[0]=[V("canvas",{id:"partTwo",class:"canvas",height:"1536",width:"200"},null,-1)]))):D("",!0)}}),$=N(W,[["__scopeId","data-v-a4a2ba71"]]);export{$ as default};
