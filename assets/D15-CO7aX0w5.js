import{a as F,V as T}from"./VCard-CSE_lddC.js";import{a4 as j,v as W,o as q,a6 as A,a7 as V,e as G,a as v,r as z,w as H,ab as N,ah as J,a0 as K}from"./index-CQeccUiL.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VDivider-C4-57J6z.js";const c=10,Q=j({__name:"V15",props:{partOne:{},partTwo:{},width:{},height:{}},setup(_){const m=_,y=n=>{if(n.index===n.configs.length)return;const d=n.configs[n.index++];for(let u=0;u<m.height;u++)for(let o=0;o<n.width;o++)n.ctx.fillStyle="#2f3542",n.ctx.fillRect(o*c,u*c,c,c);n.ctx.fillStyle="#57606f",d.walls.forEach(u=>{const[o,s]=u.split("|").map(Number);n.ctx.fillRect(o*c,s*c,c,c)}),n.ctx.fillStyle="#1e90ff",d.boxes.forEach(u=>{const[o,s]=u.split("|").map(Number);n.ctx.fillRect(o*c,s*c,c,c)}),n.ctx.fillStyle="#ff6348";const[$,l]=d.robot.split("|").map(Number);n.ctx.fillRect($*c,l*c,c,c),window.requestAnimationFrame(()=>y(n))},E=n=>{const d=document.getElementById(n?"partTwo":"partOne"),$=d.getContext("2d"),l={width:n?m.width:m.width/2,configs:n?m.partTwo:m.partOne,index:0,canvas:d,ctx:$};l.canvas.width=l.width*c+1,l.canvas.height=m.height*c+1,l.ctx.translate(.5,.5),l.ctx.lineWidth=.5,l.ctx.fillStyle="#222222",l.ctx.fillRect(0,0,l.canvas.width,l.canvas.height),window.requestAnimationFrame(()=>y(l))};return W(()=>{E(!1),E(!0)}),(n,d)=>(q(),A(T,null,{default:V(()=>[G(F,{cols:"12",md:"4"},{default:V(()=>d[0]||(d[0]=[v("div",{class:"canvas-holder"},[v("canvas",{id:"partOne",class:"canvas",height:"500",width:"500"})],-1)])),_:1}),G(F,{cols:"12",md:"8"},{default:V(()=>d[1]||(d[1]=[v("div",{class:"canvas-holder"},[v("canvas",{id:"partTwo",class:"canvas",height:"500",width:"500"})],-1)])),_:1})]),_:1}))}}),U=L(Q,[["__scopeId","data-v-b3682865"]]),tt=j({__name:"D15",props:{input:{}},emits:["onFinished"],setup(_,{emit:m}){const y=_,E=z(!1),n={">":[1,0],"<":[-1,0],"^":[0,-1],v:[0,1]},d=m,$=[],l=[];let u=0,o=0,s={},w=new Set;const S=[],p={x:0,y:0},I=(r,f,a)=>{const h=[],x=new Set;h.push(s[a]),s[a].parts.forEach(t=>x.add(`${t.x}|${t.y}`));const i=[s[a].parts[0],s[a].parts[1]];for(;i.length>0;){const t=i.pop();if(t){if(r.x=t.x+f[0],r.y=t.y+f[1],a=`${r.x}|${r.y}`,w.has(a))return;s[a]&&s[a].parts.forEach((e,b)=>{x.has(`${e.x}|${e.y}`)||(x.add(`${e.x}|${e.y}`),b===0&&h.push(s[a]),i.some(g=>g.x===e.x&&g.y===e.y)||i.push({x:e.x,y:e.y}))})}}h.forEach(t=>{t.parts.forEach(e=>{delete s[`${e.x}|${e.y}`]})}),h.forEach(t=>{t.parts.forEach(e=>{e.x+=f[0],e.y+=f[1]}),t.parts.forEach(e=>{s[`${e.x}|${e.y}`]=t})}),p.x+=f[0],p.y+=f[1]},M=r=>{s={},w=new Set;let f=!0;const a=r?2:1;o=0,y.input&&y.input.forEach(h=>{if(h.length<1)f=!1;else if(f){const x=h.split("");x.forEach((i,t)=>{if(i==="@")p.x=t*a,p.y=o;else if(i==="O"){const e={parts:r?[{x:t*a,y:o},{x:t*a+1,y:o}]:[{x:t*a,y:o}]};s[`${t*a}|${o}`]=e,r&&(s[`${t*a+1}|${o}`]=e)}else i==="#"&&(w.add(`${t*a}|${o}`),r&&w.add(`${t*a+1}|${o}`))}),u=x.length*a,o++}else h.split("").forEach(x=>S.push(x))})},C=r=>{M(r),S.forEach((h,x)=>{const i=n[h],t={x:p.x+i[0],y:p.y+i[1]},e=`${t.x}|${t.y}`;if(w.has(e)||(s[e]?I(t,i,e):(p.x+=i[0],p.y+=i[1])),x%10===0||x===S.length-1){const b=new Set,g=new Set,R=`${p.x}|${p.y}`;w.forEach(O=>{b.add(O)}),Object.keys(s).forEach(O=>{s[O].parts.forEach(B=>{g.add(`${B.x}|${B.y}`)})}),r?l.push({robot:R,walls:b,boxes:g}):$.push({robot:R,walls:b,boxes:g})}});let f=0;const a=new Set;return Object.keys(s).forEach(h=>{a.add(`${s[h].parts[0].x}|${s[h].parts[0].y}`)}),a.forEach(h=>{const[x,i]=h.split("|").map(Number);f+=i*100+x}),f},D=()=>{if(y.input){const r=C(!1),f=C(!0);d("onFinished",r,f),K(()=>{E.value=!0})}};return H(()=>y.input,()=>D(),{immediate:!0}),(r,f)=>N(E)?(q(),A(U,{key:0,height:N(o),"part-one":$,"part-two":l,width:N(u)},null,8,["height","width"])):J("",!0)}});export{tt as default};
