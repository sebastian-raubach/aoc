import{p as C}from"./index-CrTQY8dy.js";import{c as W,V as G}from"./color-Cgs3GWPp.js";import{b1 as H,ak as P,w as B,k as E,b2 as N,s as T,v as J,b3 as j,a4 as M,b4 as q,o as R,c as z,a as D,r as b,ab as y,a6 as $,ah as F}from"./index-CPLsJCN8.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Q(i,s){return H()?(P(i,s),!0):!1}const X=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Y=X?window:void 0;function O(i){var s;const a=N(i);return(s=a==null?void 0:a.$el)!==null&&s!==void 0?s:a}function K(){const i=T(!1),s=j();return s&&J(()=>{i.value=!0},s),i}function L(i){const s=K();return E(()=>(s.value,!!i()))}function U(i,s,a={}){const{window:u=Y,...h}=a;let e;const v=L(()=>u&&"ResizeObserver"in u),f=()=>{e&&(e.disconnect(),e=void 0)},o=B(E(()=>{const n=N(i);return Array.isArray(n)?n.map(t=>O(t)):[O(n)]}),n=>{if(f(),v.value&&u){e=new ResizeObserver(s);for(const t of n)t&&e.observe(t,h)}},{immediate:!0,flush:"post"}),l=()=>{f(),o()};return Q(l),{isSupported:v,stop:l}}const Z=M({__name:"V10",props:{machines:{},solutions:{}},setup(i){const s=i;let a,u;const h=q("holder"),e={fgGradient:[],factor:10};U(h,f=>{const o=f[0],{width:l}=o.contentRect;v(l)});const v=f=>{let o=0;const l=s.machines.map((r,x)=>{const p=JSON.parse(JSON.stringify(r));p.indicatorHeat=p.indicators.map(()=>0),p.indicatorSteps=[];let m=p.indicators.map(()=>!1);return p.indicatorSteps.push(m),s.solutions[x].pressedButtons.forEach(S=>{m=m.concat(),r.buttons[S].forEach(w=>{m[w]=!m[w],p.indicatorHeat[w]++}),o=Math.max(o,Math.max(...p.indicatorHeat)),p.indicatorSteps.push(m)}),p});console.log(f);const n=Math.floor((f||window.innerWidth)/e.factor),t=Math.max(...l.map(r=>r.indicatorSteps.length));let d=0,c=0,g=0;l.forEach(r=>{c+r.indicators.length>=n&&(d+=t+2,c=0),r.x=c,r.y=d,g=Math.max(g,c+r.indicators.length),c+=(c===0?0:1)+r.indicators.length}),d-=2,e.fgGradient=W(G,o+1),a=document.getElementById("partOne"),a.width=g*e.factor,a.height=d*e.factor,u=a.getContext("2d"),u.lineWidth=1,u.fillStyle="#222222",u.fillRect(0,0,a.width,a.height),l.forEach((r,x)=>{const p=r.x*e.factor,m=r.y*e.factor;r.indicatorHeat.forEach((S,w)=>{const I=m,_=p+w*e.factor;u.fillStyle=e.fgGradient[S],u.fillRect(_,I,e.factor,e.factor)}),r.indicatorSteps.forEach((S,w)=>{const I=m+(w+1)*e.factor;S.forEach((_,k)=>{const V=p+k*e.factor;u.fillStyle=_===!0?"#bdc3c7":"#34495e",u.fillRect(V,I,e.factor,e.factor)})})})};return J(()=>v()),(f,o)=>(R(),z("div",{ref_key:"holder",ref:h,class:"canvas-holder"},o[0]||(o[0]=[D("canvas",{id:"partOne",class:"canvas",height:"1000",width:"1000"},null,-1)]),512))}}),tt=A(Z,[["__scopeId","data-v-19381ca6"]]),st=M({__name:"D10",props:{input:{}},emits:["onFinished"],setup(i,{emit:s}){const a=i,u=s,h=b(),e=b(),v=()=>{if(a.input){let o=0,l=0;h.value=a.input.map(n=>{const t={indicators:[],buttons:[],joltage:[]};return n.split(" ").forEach(c=>{c.startsWith("[")?t.indicators=c.replace(/(\[|\])/g,"").split("").map(g=>g==="#"):c.startsWith("{")?t.joltage=c.replace(/(\{|\})/g,"").split(",").map(Number):t.buttons.push(c.replace(/(\(|\))/g,"").split(",").map(Number))}),t}),e.value=h.value.map(n=>f(n)),o=e.value.map(n=>n.cost).reduce((n,t)=>n+t),u("onFinished",o,l)}};function f(o){const l=(t,d)=>t.cost-d.cost,n=new C.PriorityQueue(l);for(n.enqueue({targetIndicators:o.indicators,currentIndicators:o.indicators.map(()=>!1),targetJoltage:o.joltage,currentJoltage:o.joltage.map(()=>0),cost:0,pressedButtons:[]});n.size()>0;){const t=n.dequeue();if(t){if(JSON.stringify(t.currentIndicators)===JSON.stringify(t.targetIndicators))return{cost:t.cost,pressedButtons:t.pressedButtons};for(let d=0;d<o.buttons.length;d++){const c=t.currentIndicators.concat(),g=[];o.buttons[d].forEach(r=>{c[r]=!c[r]}),g.push(d),n.enqueue({targetIndicators:t.targetIndicators,currentIndicators:c,currentJoltage:t.currentJoltage,targetJoltage:t.targetJoltage,cost:t.cost+1,pressedButtons:t.pressedButtons.concat(g)})}}}return{cost:Number.POSITIVE_INFINITY,pressedButtons:[]}}return B(()=>a.input,()=>v(),{immediate:!0}),(o,l)=>y(h)&&y(e)?(R(),$(tt,{key:0,machines:y(h),solutions:y(e)},null,8,["machines","solutions"])):F("",!0)}});export{st as default};
