var w=Object.defineProperty;var k=(a,n,c)=>n in a?w(a,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[n]=c;var u=(a,n,c)=>k(a,typeof n!="symbol"?n+"":n,c);import{m as M}from"./math-BfW4n0ha.js";import{a4 as _,w as x,o as v,c as j}from"./index-gR1E7YKU.js";const S=_({__name:"D17",props:{input:{}},emits:["onFinished"],setup(a,{emit:n}){const c=a,l=n;class g{constructor(t,e){u(this,"instructions");u(this,"registers");this.instructions=t,this.registers=e}getOperand(t){switch(t){case 0:case 1:case 2:case 3:return t;case 4:return this.registers.a;case 5:return this.registers.b;case 6:return this.registers.c;case 7:default:return 1}}run(t){return this.registers={a:t,b:0,c:0},this.execute()}execute(){let t=0;const e=[];for(;t<this.instructions.length-1;){const[o,r]=this.instructions.slice(t,t+2),i=this.getOperand(r);switch(t+=2,o){case 0:this.registers.a=Math.floor(this.registers.a/Math.pow(2,i));break;case 1:this.registers.b=this.registers.b^r;break;case 2:this.registers.b=i%8;break;case 3:this.registers.a!==0&&(t=r);break;case 4:this.registers.b=this.registers.b^this.registers.c;break;case 5:e.push(M(i,8));break;case 6:this.registers.b=Math.floor(this.registers.a/Math.pow(2,i));break;case 7:this.registers.c=Math.floor(this.registers.a/Math.pow(2,i));break}}return e}}const h=s=>{const t={a:+s[0].split(": ")[1],b:+s[1].split(": ")[1],c:+s[2].split(": ")[1]},e=s[4].split(" ")[1].split(",").map(Number);return new g(e,t)},m=(s,t,e)=>{t*=8;const o=[];for(let r=0;r<8;r++)s.run(t+r).join(",")===e.join(",")&&o.push(t+r);return o},b=()=>{if(c.input){let s=h(c.input);const t=s.execute();s=h(c.input);const e=[];let o=new Set;o.add(0);for(let i=s.instructions.length-1;i>=0;i--){e.unshift(s.instructions[i]);const p=new Set;o.forEach(f=>{m(s,f,e).forEach(d=>p.add(d))}),o=p}const r=Math.min.apply(null,[...o]);l("onFinished",t.join(","),r)}};return x(()=>c.input,()=>b(),{immediate:!0}),(s,t)=>(v(),j("span"))}});export{S as default};
